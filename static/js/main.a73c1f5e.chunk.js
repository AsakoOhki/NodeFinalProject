(this["webpackJsonpfirebase-react-auth"]=this["webpackJsonpfirebase-react-auth"]||[]).push([[0],{70:function(e,t,a){e.exports=a(89)},89:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(26),c=a.n(l),o=a(13),u=a.n(o),s=a(22),i=a(7),m=a(98),d=a(92),p=a(95),f=a(93),E=a(18),b=a(53),v=a.n(b);a(76),a(78);console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/NodeFinalProject",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FIREBASE_API_KEY:"AIzaSyD-Bqd64IQVSvrVkJDIn7L8EVzlLy86m4s",REACT_APP_FIREBASE_AUTH_DOMAIN:"finalproject-de968.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"finalproject-de968",REACT_APP_FIREBASE_STORAGE_BUCKET:"finalproject-de968.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"622521159060",REACT_APP_FIREBASE_APP_ID:"1:622521159060:web:bf3f06564fbf3fa0cd5381"}));var h=v.a.initializeApp({apiKey:"AIzaSyD-Bqd64IQVSvrVkJDIn7L8EVzlLy86m4s",authDomain:"finalproject-de968.firebaseapp.com",projectId:"finalproject-de968",storageBucket:"finalproject-de968.appspot.com",messagingSenderId:"622521159060",appId:"1:622521159060:web:bf3f06564fbf3fa0cd5381"}),O={folders:h.firestore().collection("folders"),formatDoc:function(e){return Object(E.a)({id:e.id},e.data())},getCurrentTimestamp:v.a.firestore.FieldValue.serverTimestamp},j=h.auth(),g=n.a.createContext();function w(){return Object(r.useContext)(g)}function y(e){var t=e.children,a=Object(r.useState)(),l=Object(i.a)(a,2),c=l[0],o=l[1],u=Object(r.useState)(!0),s=Object(i.a)(u,2),m=s[0],d=s[1];Object(r.useEffect)((function(){return j.onAuthStateChanged((function(e){o(e),d(!1)}))}),[]);var p={currentUser:c,login:function(e,t){return j.signInWithEmailAndPassword(e,t)},signup:function(e,t){return j.createUserWithEmailAndPassword(e,t)},logout:function(){return j.signOut()},resetPassword:function(e){return j.sendPasswordResetEmail(e)},updateEmail:function(e){return c.updateEmail(e)},updatePassword:function(e){return c.updatePassword(e)}};return n.a.createElement(g.Provider,{value:p},!m&&t)}var x=a(9),S=a(6),P=a(91);function I(e){var t=e.children;return n.a.createElement(P.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"}},n.a.createElement("div",{className:"w-100",style:{maxWidth:"400px"}},t))}function N(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=Object(r.useRef)(),l=w().signup,c=Object(r.useState)(""),o=Object(i.a)(c,2),E=o[0],b=o[1],v=Object(r.useState)(!1),h=Object(i.a)(v,2),O=h[0],j=h[1],g=Object(x.g)();function y(){return(y=Object(s.a)(u.a.mark((function r(n){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),t.current.value===a.current.value){r.next=3;break}return r.abrupt("return",b("Passwords do not match"));case 3:return r.prev=3,b(""),j(!0),r.next=8,l(e.current.value,t.current.value);case 8:g.push("/"),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),b("Failed to create an account");case 14:j(!1);case 15:case"end":return r.stop()}}),r,null,[[3,11]])})))).apply(this,arguments)}return n.a.createElement(I,null,n.a.createElement(m.a,null,n.a.createElement(m.a.Body,null,n.a.createElement("h2",{className:"text-center mb-4"},"Sign Up"),E&&n.a.createElement(d.a,{variant:"danger"},E),n.a.createElement(p.a,{onSubmit:function(e){return y.apply(this,arguments)}},n.a.createElement(p.a.Group,{id:"email"},n.a.createElement(p.a.Label,null,"Email"),n.a.createElement(p.a.Control,{type:"email",ref:e,required:!0})),n.a.createElement(p.a.Group,{id:"password"},n.a.createElement(p.a.Label,null,"Password"),n.a.createElement(p.a.Control,{type:"password",ref:t,required:!0})),n.a.createElement(p.a.Group,{id:"password-confirm"},n.a.createElement(p.a.Label,null,"Password Confirmation"),n.a.createElement(p.a.Control,{type:"password",ref:a,required:!0})),n.a.createElement(f.a,{disabled:O,className:"w-100",type:"submit"},"Sign Up")))),n.a.createElement("div",{className:"w-100 text-center mt-2"},"Already have an account? ",n.a.createElement(S.b,{to:"/login"},"Log In")))}function A(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),a=t[0],l=t[1],c=w(),o=c.currentUser,p=c.logout,E=Object(x.g)();function b(){return(b=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(""),e.prev=1,e.next=4,p();case 4:E.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),l("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return n.a.createElement(I,null,n.a.createElement(m.a,null,n.a.createElement(m.a.Body,null,n.a.createElement("h2",{className:"text-center mb-4"},"Profile"),a&&n.a.createElement(d.a,{variant:"danger"},a),n.a.createElement("strong",null,"Email:")," ",o.email,n.a.createElement(S.b,{to:"/update-profile",className:"btn btn-primary w-100 mt-3"},"Update Profile"))),n.a.createElement("div",{className:"w-100 text-center mt-2"},n.a.createElement(f.a,{variant:"link",onClick:function(){return b.apply(this,arguments)}},"Log Out")))}function C(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=w().login,l=Object(r.useState)(""),c=Object(i.a)(l,2),o=c[0],E=c[1],b=Object(r.useState)(!1),v=Object(i.a)(b,2),h=v[0],O=v[1],j=Object(x.g)();function g(){return(g=Object(s.a)(u.a.mark((function r(n){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),r.prev=1,E(""),O(!0),r.next=6,a(e.current.value,t.current.value);case 6:j.push("/"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),E("Failed to log in");case 12:O(!1);case 13:case"end":return r.stop()}}),r,null,[[1,9]])})))).apply(this,arguments)}return n.a.createElement(I,null,n.a.createElement(m.a,null,n.a.createElement(m.a.Body,null,n.a.createElement("h2",{className:"text-center mb-4"},"Log In"),o&&n.a.createElement(d.a,{variant:"danger"},o),n.a.createElement(p.a,{onSubmit:function(e){return g.apply(this,arguments)}},n.a.createElement(p.a.Group,{id:"email"},n.a.createElement(p.a.Label,null,"Email"),n.a.createElement(p.a.Control,{type:"email",ref:e,required:!0})),n.a.createElement(p.a.Group,{id:"password"},n.a.createElement(p.a.Label,null,"Password"),n.a.createElement(p.a.Control,{type:"password",ref:t,required:!0})),n.a.createElement(f.a,{disabled:h,className:"w-100",type:"submit"},"Log In")),n.a.createElement("div",{className:"w-100 text-center mt-3"},n.a.createElement(S.b,{to:"/forgot-password"},"Forgot Password?")))),n.a.createElement("div",{className:"w-100 text-center mt-2"},"Need an account? ",n.a.createElement(S.b,{to:"/signup"},"Sign Up")))}var _=a(69);function k(e){var t=e.component,a=Object(_.a)(e,["component"]),r=w().currentUser;return n.a.createElement(x.b,Object.assign({},a,{render:function(e){return r?n.a.createElement(t,e):n.a.createElement(x.a,{to:"/login"})}}))}function F(){var e=Object(r.useRef)(),t=w().resetPassword,a=Object(r.useState)(""),l=Object(i.a)(a,2),c=l[0],o=l[1],E=Object(r.useState)(""),b=Object(i.a)(E,2),v=b[0],h=b[1],O=Object(r.useState)(!1),j=Object(i.a)(O,2),g=j[0],y=j[1];function x(){return(x=Object(s.a)(u.a.mark((function a(r){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.prev=1,h(""),o(""),y(!0),a.next=7,t(e.current.value);case 7:h("Check your inbox for further instructions"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),o("Failed to reset password");case 13:y(!1);case 14:case"end":return a.stop()}}),a,null,[[1,10]])})))).apply(this,arguments)}return n.a.createElement(I,null,n.a.createElement(m.a,null,n.a.createElement(m.a.Body,null,n.a.createElement("h2",{className:"text-center mb-4"},"Password Reset"),c&&n.a.createElement(d.a,{variant:"danger"},c),v&&n.a.createElement(d.a,{variant:"success"},v),n.a.createElement(p.a,{onSubmit:function(e){return x.apply(this,arguments)}},n.a.createElement(p.a.Group,{id:"email"},n.a.createElement(p.a.Label,null,"Email"),n.a.createElement(p.a.Control,{type:"email",ref:e,required:!0})),n.a.createElement(f.a,{disabled:g,className:"w-100",type:"submit"},"Reset Password")),n.a.createElement("div",{className:"w-100 text-center mt-3"},n.a.createElement(S.b,{to:"/login"},"Login")))),n.a.createElement("div",{className:"w-100 text-center mt-2"},"Need an account? ",n.a.createElement(S.b,{to:"/signup"},"Sign Up")))}function R(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=Object(r.useRef)(),l=w(),c=l.currentUser,o=l.updatePassword,u=l.updateEmail,s=Object(r.useState)(""),E=Object(i.a)(s,2),b=E[0],v=E[1],h=Object(r.useState)(!1),O=Object(i.a)(h,2),j=O[0],g=O[1],y=Object(x.g)();return n.a.createElement(I,null,n.a.createElement(m.a,null,n.a.createElement(m.a.Body,null,n.a.createElement("h2",{className:"text-center mb-4"},"Update Profile"),b&&n.a.createElement(d.a,{variant:"danger"},b),n.a.createElement(p.a,{onSubmit:function(r){if(r.preventDefault(),t.current.value!==a.current.value)return v("Passwords do not match");var n=[];g(!0),v(""),e.current.value!==c.email&&n.push(u(e.current.value)),t.current.value&&n.push(o(t.current.value)),Promise.all(n).then((function(){y.push("/user")})).catch((function(){v("Failed to update account")})).finally((function(){g(!1)}))}},n.a.createElement(p.a.Group,{id:"email"},n.a.createElement(p.a.Label,null,"Email"),n.a.createElement(p.a.Control,{type:"email",ref:e,required:!0,defaultValue:c.email})),n.a.createElement(p.a.Group,{id:"password"},n.a.createElement(p.a.Label,null,"Password"),n.a.createElement(p.a.Control,{type:"password",ref:t,placeholder:"Leave blank to keep the same"})),n.a.createElement(p.a.Group,{id:"password-confirm"},n.a.createElement(p.a.Label,null,"Password Confirmation"),n.a.createElement(p.a.Control,{type:"password",ref:a,placeholder:"Leave blank to keep the same"})),n.a.createElement(f.a,{disabled:j,className:"w-100",type:"submit"},"Update")))),n.a.createElement("div",{className:"w-100 text-center mt-2"},n.a.createElement(S.b,{to:"/user"},"Cancel")))}var D="select-folder",L="update-folder",B="set-child-folders",T={name:"Root",id:null,path:[]};function U(e,t){var a=t.type,r=t.payload;switch(a){case D:return{folderId:r.folderId,folder:r.folder,childFiles:[],childFolders:[]};case L:return Object(E.a)(Object(E.a)({},e),{},{folder:r.folder});case B:return Object(E.a)(Object(E.a)({},e),{},{childFolders:r.childFolders});default:return e}}var G=a(36),q=a(94),W=a(46),V=a(47);function z(e){var t=e.currentFolder,a=Object(r.useState)(!1),l=Object(i.a)(a,2),c=l[0],o=l[1],u=Object(r.useState)(""),s=Object(i.a)(u,2),m=s[0],d=s[1],E=w().currentUser;function b(){o(!1)}return n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,{onClick:function(){o(!0)},variant:"outline-success",size:"sm"},n.a.createElement(W.a,{icon:V.b})),n.a.createElement(q.a,{show:c,onHide:b},n.a.createElement(p.a,{onSubmit:function(e){if(e.preventDefault(),null!=t){var a=Object(G.a)(t.path);t!==T&&a.push({name:t.name,id:t.id}),O.folders.add({name:m,parentId:t.id,userId:E.uid,path:a,createdAt:O.getCurrentTimestamp()}),d(""),b()}}},n.a.createElement(q.a.Body,null,n.a.createElement(p.a.Group,null,n.a.createElement(p.a.Label,null,"Folder Name"),n.a.createElement(p.a.Control,{type:"text",required:!0,value:m,onChange:function(e){return d(e.target.value)}}))),n.a.createElement(q.a.Footer,null,n.a.createElement(f.a,{variant:"secondary",onClick:b},"Close"),n.a.createElement(f.a,{variant:"success",type:"submit"},"Add Folder")))))}function K(e){var t=e.folder;return n.a.createElement(f.a,{to:{pathname:"/folder/".concat(t.id),state:{folder:t}},variant:"outline-dark",className:"text-truncate w-100",as:S.b},n.a.createElement(W.a,{icon:V.a,className:"mr-2"}),t.name)}var H=a(97),J=a(96);function M(){return n.a.createElement(H.a,{bg:"light",expand:"sm"},n.a.createElement(H.a.Brand,{as:S.b,to:"/"},"WDS Drive"),n.a.createElement(J.a,null,n.a.createElement(J.a.Link,{as:S.b,to:"/user"},"Profile")))}var Q=a(99);function Y(e){var t=e.currentFolder,a=t===T?[]:[T];return t&&(a=[].concat(Object(G.a)(a),Object(G.a)(t.path))),n.a.createElement(Q.a,{className:"flex-grow-1",listProps:{className:"bg-white pl-0 m-0"}},a.map((function(e,t){return n.a.createElement(Q.a.Item,{key:e.id,linkAs:S.b,linkProps:{to:{pathname:e.id?"/folder/".concat(e.id):"/",state:{folder:Object(E.a)(Object(E.a)({},e),{},{path:a.slice(1,t)})}}},className:"text-truncate d-inline-block",style:{maxWidth:"150px"}},e.name)})),t&&n.a.createElement(Q.a.Item,{className:"text-truncate d-inline-block",style:{maxWidth:"200px"},active:!0},t.name))}function X(){var e=Object(x.i)().folderId,t=Object(x.h)().state,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=Object(r.useReducer)(U,{folderId:e,folder:t,childFolders:[],childFiles:[]}),n=Object(i.a)(a,2),l=n[0],c=n[1],o=w(),u=o.currentUser;return Object(r.useEffect)((function(){c({type:D,payload:{folderId:e,folder:t}})}),[e,t]),Object(r.useEffect)((function(){if(null==e)return c({type:L,payload:{folder:T}});O.folders.doc(e).get().then((function(e){c({type:L,payload:{folder:O.formatDoc(e)}})})).catch((function(){c({type:L,payload:{folder:T}})}))}),[e]),Object(r.useEffect)((function(){return O.folders.where("parentId","==",e).where("userId","==",u.uid).orderBy("createdAt").onSnapshot((function(e){c({type:B,payload:{childFolders:e.docs.map(O.formatDoc)}})}))}),[e,u]),l}(e,(void 0===t?{}:t).folder),l=a.folder,c=a.childFolders;return n.a.createElement(n.a.Fragment,null,n.a.createElement(M,null),n.a.createElement(P.a,{fluid:!0},n.a.createElement("div",{className:"d-flex align-items-center"},n.a.createElement(Y,{currentFolder:l}),n.a.createElement(z,{currentFolder:l})),c.length>0&&n.a.createElement("div",{className:"d-flex flex-wrap"},c.map((function(e){return n.a.createElement("div",{key:e.id,style:{maxWidth:"250px"},className:"p-2"},n.a.createElement(K,{folder:e}))})))))}var Z=function(){return n.a.createElement(S.a,null,n.a.createElement(y,null,n.a.createElement(x.d,null,n.a.createElement(k,{exact:!0,path:"/",component:X}),n.a.createElement(k,{exact:!0,path:"/folder/:folderId",component:X}),n.a.createElement(k,{path:"/user",component:A}),n.a.createElement(k,{path:"/update-profile",component:R}),n.a.createElement(x.b,{path:"/signup",component:N}),n.a.createElement(x.b,{path:"/login",component:C}),n.a.createElement(x.b,{path:"/forgot-password",component:F}))))};a(88);c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(Z,null)),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.a73c1f5e.chunk.js.map